{% extends "layouts/base.html" %}

{% block title %}Member Pass - TIB Watch{% endblock %}

{% block navbar_search %}{% endblock %}

{% block content %}
<div style="display: flex; justify-content: center; align-items: center; min-height: 80vh;">

    <!-- Credential Card -->
    <div style="
        background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
        background-color: #111;
        width: 350px;
        height: 550px;
        border-radius: 20px;
        box-shadow: 0 0 50px rgba(0,0,0,0.8), 0 0 20px var(--accent-color);
        position: relative;
        overflow: hidden;
        border: 2px solid rgba(255,255,255,0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        color: white;
    ">

        <!-- Lanyard Hole -->
        <div style="
            width: 80px;
            height: 10px;
            background: #000;
            margin-top: 20px;
            border-radius: 5px;
            box-shadow: inset 0 0 5px rgba(0,0,0,1);
        "></div>

        <!-- Header -->
        <div
            style="margin-top: 30px; text-transform: uppercase; letter-spacing: 2px; font-weight: 800; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5);">
            TIB Watch Awards
        </div>
        <div style="font-size: 0.7rem; letter-spacing: 5px; color: #888; margin-bottom: 20px;">
            Official Member
        </div>

        <!-- Photo -->
        <div style="position: relative;">
            <div style="
                width: 120px; 
                height: 120px; 
                border-radius: 50%; 
                border: 4px solid var(--accent-color); 
                overflow: hidden;
                background: #000;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 0 20px rgba(231, 76, 60, 0.4);
            ">
                {% if user.profile_image %}
                <!-- Handle local uploads vs external URLs -->
                <img src="{{ user.profile_image if 'http' in user.profile_image else '/' + user.profile_image }}"
                    style="width: 100%; height: 100%; object-fit: cover;">
                {% elif user.picture %}
                <img src="{{ user.picture }}" style="width: 100%; height: 100%; object-fit: cover;">
                {% else %}
                <i class="fas fa-user" style="font-size: 3rem; color: #666;"></i>
                {% endif %}
            </div>
            <a href="/auth/profile/edit" style="
                position: absolute; 
                bottom: 0; 
                right: 0; 
                background: var(--accent-color); 
                color: white; 
                width: 30px; 
                height: 30px; 
                border-radius: 50%; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                text-decoration: none;
                font-size: 0.8rem;
                border: 2px solid #111;
            ">
                <i class="fas fa-pen"></i>
            </a>

            <a href="/auth/logout" style="
                position: absolute; 
                bottom: 0; 
                left: 0; 
                background: #333; 
                color: white; 
                width: 30px; 
                height: 30px; 
                border-radius: 50%; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                text-decoration: none;
                font-size: 0.8rem;
                border: 2px solid #111;
            " title="Logout">
                <i class="fas fa-sign-out-alt"></i>
            </a>

            <!-- Info -->
            <h2 style="margin-top: 20px; font-size: 1.5rem; margin-bottom: 5px;">{{ user.name }}</h2>
            <div style="color: #ccc; font-size: 0.9rem;">{{ user.email }}</div>

            <div style="color: #888; font-size: 0.8rem; margin-top: 5px; min-height: 30px;">
                {% if user.city or user.state or user.country %}
                {{ [user.city, user.state, user.country]|select()|join(", ") }} <br>
                {% endif %}
                {{ user.phone or '' }}
            </div>

            <!-- Stats Mini -->
            <div
                style="display: flex; gap: 20px; margin-top: 30px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; width: 80%;">
                <div style="flex: 1;">
                    <div style="font-size: 1.5rem; font-weight: 800; color: #fff;">{{ stats.total_titles }}</div>
                    <div style="font-size: 0.8rem; color: #ccc; text-transform: uppercase; font-weight: 600;">Titles
                    </div>
                </div>
                <div style="border-right: 1px solid rgba(255,255,255,0.2);"></div>
                <div style="flex: 1;">
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--accent-color);">{{ stats.total_hours
                        }}
                    </div>
                    <div style="font-size: 0.8rem; color: #ccc; text-transform: uppercase; font-weight: 600;">Hours
                    </div>
                </div>
            </div>

            <!-- Decoration -->
            <div style="margin-top: auto; margin-bottom: 30px; opacity: 0.3;">
                <i class="fas fa-fingerprint" style="font-size: 4rem;"></i>
            </div>

        </div>

        <!-- Glow Effect Back -->
        <div style="
        position: absolute;
        width: 360px;
        height: 560px;
        background: var(--accent-color);
        filter: blur(50px);
        opacity: 0.2;
        z-index: -1;
    "></div>

    </div>
    {% endblock %}